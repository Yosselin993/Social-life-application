{% load bootstrap5 %}  <!-- Django Bootstrap 5 tags -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add An Event - UTRGVconnect</title>
    <link rel="icon" type="image/png" href="/media/favicon.png"> <!--sets the browser tab icon-->

    {% bootstrap_css %}  <!-- includes Bootstrap CSS -->

    <!--added an updated style (custom CSS) for the add an event form-->
    <style>
        body {
            background: linear-gradient(to right, #fff3e0, #ff9800); /*gradient background */
            min-height: 100vh; /*full screen height*/
        }
        .event-card {
            max-width: 650px; /* limit width of card */
            margin: 40px auto; /* center the card with top/bottom spacing */
            border-radius: 16px; /* rounded corners */
            padding: 30px; /* internal spacing */
            background: #ffffff; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* sublte shadow*/
        }
        h2 {
            color: #0d47a1; /* titles */
            font-weight: 700; /* bold font */
        }
        label {
            font-weight: 600;
            color: #0d47a1;
        }
    </style>

    <!-- jQuery (required for datepicker/timepicker) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap Datepicker CSS & JS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

    <!-- Bootstrap Timepicker  CSS & JS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
</head>

<body>

<div class="container">

    <!--UTRGVConnect logo takes you back to main page-->
    <a href="{% url 'mainPage' %}" style="text-decoration:none;">
        <h2>UTRGVconnect</h2>
    </a>

    <hr>

    <h3>Add An Event </h3>

    <!-- Form for adding an event -->
    <form method="POST">
        {% csrf_token %}  <!-- required for Django forms, securit feature: prevents CSRF attacks -->

        <!-- Event Title -->
        <div class="mb-3">
            <label for="title">Event Title: </label>
            {{ form.title }} <!--django form field for the title, from EventForm-->
        </div>

        <!-- Date Picker -->
        <div class="mb-3">
            <label for="date">Date:</label>
            {{ form.date }} <!--django form field for date -->
        </div>

        <!-- Time Picker -->
        <div class="mb-3">
            <label for="time">Time:</label>
            {{ form.time }} <!--django form field for time-->
        </div>

        <!-- Location -->
        <div class="mb-3">
            <label for="location">Location:</label>
            {{ form.location }} 
        </div>

        <!-- Event Description -->
        <div class="mb-3">
            <label for="description">Description:</label> <!--django form field for description (textarea)-->
            {{ form.description }}
        </div>

        <!-- Submit button -->
        <button type="submit" class="btn btn-primary w-100">Create Event</button> <!--bootrstrap button, full width-->
    </form>

    <!-- Back button to events calendar -->
    <div class="mt-3 text-center">
        <a href="{% url 'events_calendar' %}" class="btn btn-outline-primary">Back to Calendar</a>
    </div>

    <!--loop thorugh days and show events-->
    {% for day in days %}
        <div class="day-box">
            {{ day }}
            {% for event in events %}
            {% if event.day == day %}
                <div class="event">{{ event.title }}</div> <!--show event title on that day-->
            {% endif %}
            {% endfor %}
        </div>
    {% endfor %}


</div>

<!-- JS to activate pickers -->
<script>
$(document).ready(function() {
    // activates the datepicker for the date input
    $('#date').datepicker({
        format: 'mm/dd/yyyy', //data format
        autoclose: true, //closes picker after selection
        todayHighlight: true // highlights today's date
    });

    // activates the timepicker for the time input
    $('#time').timepicker({
        timeFormat: 'h:mm p', //12 hour format with am/pm
        interval: 15, // step interval in minutes
        dynamic: false, // don't adjust as user types
        dropdown: true, // show dropdown
        scrollbar: true // allow scrollbar
    });
});
</script>

{% bootstrap_javascript %}  <!-- includes Bootstrap JS for interactivity -->
</body>
</html>
